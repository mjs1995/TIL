# 도커 관리 
- 도커 컴포즈 : 다수의 컨테이너 운용 도구, 도커 컴포즈
  - 도커는 컨테이너 기반의 오픈소스 가상화 플랫폼
  - 복잡한 리눅스 애플리케이션을 컨테이너로 묶어서 실행할 수 있음
  - 개발, 테스트, 서비스 환경을 하나로 통일하여 효율적으로 관리할 수 있음
  - 컨테이너(이미지)를 전 세계 사람들과 공유
  - Docker compose 명령은 여러 개의 컨테이너 옵션과 환경을 정의한 파일을 읽어 컨테이너를 순차적으로 실행시킴
  - 도커 컴포즈 설정 파일(docker-compose.yml)은 run 명령어 옵션을 그대로 사용할 수 있으며, 각 컨테이너의 의존성, 네트 워크, 볼륨, 컨테이너 수 등을 유동적으로 조절할 수 있음
  - 도커 컴포즈 기본 수행 절차
    - Dockerfile 정의 : 앱 환경 설정
    - docker-compose.yml 설정 : 앱과 같이 수행 될 서비스 설정
    - docker-compose up을 통한 전체 앱 실행
  - 도커 컴포즈 yaml 포맷
    - ```yaml
      version: '3'
      services:
        mdb:
          image:mariadb:latest
          environment: MYSQL_ROOT_PASSWORD:1234
        web:
          build:./dockerfile
          image:apache_df:web
          ports:
            - "80:80"
          links:
            - mdb:mdb
      ```
      - version : docker-compose.yml 내용을 해석하기 위한 문법 버전 -3 버전은 안전 버전
      - Services: 생성될 컨테이너의 정보를 담고 있음. Services 바로 아래에 서비스명을 기술할 수 있으며 위에 기술된 mdb, web이 서비스명이 됨
      - Echo : services 아래의 echo는 컨테이너 이름임. 즉, echo는 하나의 컨테이너
      - image/ports : 도커 이미지/포트포워딩
    - 컨테이너 실행 : docker-compose up
    - 컨테이너 종료 : docker-compose down
  - 도커 컴포즈로 할 수 있는 것
    - 단일 호스트 상, 다수의 독립 환경 운용
    - 컨테이너 볼륨의 보존
    - 변경된 컨테이너의 재생성
    - 환경 간 변수 및 구성 이동 
- 도커를 사용해야 하는 이유
  - 코드를 신속히 전달 및 이동 가능
  - 애플리케이션 운영의 표준화 가능
  - 소스 사용률을 높여 비용 절감
  - 어디서나 안정적으로 실행할 수 있는 단일 객체 확보
  - 간단한 구문을 사용해 완벽하게 제어
  - 도구 및 상용 애플리케이션의 에코시스템이 강력
- 도커를 사용하면
  - 마이크로 서비스 : 도커 컨테이너를 통해 표준화된 코드 배포를 활용하여 분산 애플리케이션 아키텍처를 구축하고 확장함
  - 지속적인 통합 및 제공 : 환경을 표준화하고 언어 스택 및 버전 간의 충돌을 제거함으로써 애플리케이션을 더욱 빠르게 제공함
  - 서비스로서의 컨테이너 : 안전한 IT 관리형 인프라의 콘텐츠로 분산 애플리케이션을 구축 및 제공함
  - 데이터 처리 : 빅 데이터 처리를 서비스로 제공, 데이터 및 분석 패키지를 기술자가 아닌 사용자도 실행할 수 있는 이동식 컨테이너로 패키징
- 도커 아키텍처
  - ![image](https://github.com/mjs1995/Certified-AWS/assets/47103479/59ec11aa-ba04-4570-954e-76a81e7c9273)
    - https://www.leafcats.com/146
  - Client : 도커 컨테이너를 관리하고 실행하기 위해서 Daemon과 상호작용하는 Binary 파일
  - Registry : 도커 이미지가 저장되어 있는 장소. 대표적으로 도커 허브가 있음. Registry는 Public Registry와 Private Registry가 있음
  - Daemon : Host에 설치되어 도커 컨테이너를 관리하는 데몬 프로세스. Client와 상호 작용함
  - Image : 도커 데몬을 통해 컨테이너로 실행 가능하도록 필요한 프로그램, 라이브러리, 소스 등이 설치된 파일
  - Container : Image를 실행한 상태 
- 도커 이미지
  - 컨테이너 실행에 필요한 파일과 설정값 등을 포함하고 있는 것으로 상태값을 가지지 않고 변하지 않음
  - 컨테이너는 이미지를 실행한 상태라고 볼 수 있고 추가되거나 변하는 값은 컨테이너에 저장됨
